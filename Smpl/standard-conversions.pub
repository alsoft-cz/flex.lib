----------------------------------------------------------------------------------------------------
module public conversions =
-- Miscellaneous conversion routines.
-- Flex Standard Library
-- Copyright (C) 1999-2003 A && L soft
----------------------------------------------------------------------------------------------------
-- To do:
--   -- change return value to unconstrained string
----------------------------------------------------------------------------------------------------

type
  -- radix of a character representation of an integer
  t_radix          = t_unsigned range 2..36;

const
  -- error codes of the conversion routines
  conv_ok          = 0;                          -- conversion OK
  conv_small       = -1;                         -- destination buffer too small
  { error > 0                                    -- error in the ERRORth number                    }

----------------------------------------------------------------------------------------------------
procedure signed_to_string (
    num            : in t_signed;                -- number to convert
    sign_always    : in t_logical := false)      -- T-always include sign
    return t_char32str;                          -- it's string representation
-- Converts a signed integer to its decimal string representation. For a positive (or zero) value
-- <par>num</par>, the plus sign is not included. For a negative value, the minus sign included.
----------------------------------------------------------------------------------------------------
procedure unsigned_to_string (
    num            : in t_unsigned)              -- number to convert
    return t_char32str;                          -- it's string representation
-- Converts an unsigned integer to its decimal string representation. The plus sign is not included.
----------------------------------------------------------------------------------------------------
procedure unsigned_to_radix_string (
    num            : in t_unsigned;              -- number to convert
    radix          : in t_radix)                 -- desired radix
    return t_char32str;                          -- it's string representation
-- Converts an unsigned integer to its string representation in the number system with the specified
-- [radix]. The plus sign is not included.
----------------------------------------------------------------------------------------------------
procedure string_to_unsigned (
    s              : in t_char32ustr;            -- string represetation of a value
    radix          : in t_radix := 10;           -- radix of the number system
    bin            : out unchecked;              -- corresponding binary representation
    error          : out t_signed);              -- error code
-- Converts a string representation of an unsigned integer to the corresponding binary 
-- representation. The number is expected to be in the number system specified by <par>radix</par>.
--   The resulting value is stored into <par>bin</par> and must fit to <par>bin</par>:size bytes, 
-- otherwise the subprogram fails and <ent>conv_radix</ent> is returned in <par>error</par>.
--
-- Parameters:
--   s             <par>s</par> can contain only the decimal digits "0".."9" and extended digits 
--                 "A".."Z" ("a".."z") further constrained by <par>radix</par> (e.g. when 
--                 <par>radix</par> is 20, than <par>s</par> can contain only "0".."9" and 
--                 "A".."J"), otherwise the subprogram fails and the index of the failing character
--                 in <par>s</par> is returned in <par>error</par>.
--    
-- Result:
--    -- When the subprogram fails, <par>error</par> contains the error code and the value of 
--       <par>bin</par> is undefined.
--    -- When the subprogram succeeds, <par>error</par> contains <ent>conv_ok</ent>.
----------------------------------------------------------------------------------------------------
procedure string_to_signed (
    s              : in t_char32ustr;            -- string represetation of a value
    radix          : in t_radix := 10;           -- radix of the number system
    bin            : out unchecked;              -- corresponding binary representation
    error          : out t_signed);              -- error code
-- Converts a string representation of a signed integer to the corresponding binary representation. 
-- The number is expected to be in the number system specified by <par>radix</par>.
--   The resulting value is stored into <par>bin</par> and must fit to <par>bin</par>:size bytes, 
-- otherwise the subprogram fails and <ent>conv_radix</ent> is returned in <par>error</par>.
--
-- Parameters:
--   s             The first character of <par>s</par> may be the minus sign "-", which indicates
--                 a negative value, all other characters can contain only the decimal digits 
--                 "0".."9" and extended digits "A".."Z" ("a".."z") further constrained by 
--                 <par>radix</par> (e.g. when <par>radix</par> is 20, than <par>s</par> can contain 
--                 only "0".."9" and "A".."J"), otherwise the subprogram fails and the index of the 
--                 failing character in <par>s</par> is returned in <par>error</par>.
--    
-- Result:
--    -- When the subprogram fails, <par>error</par> contains the error code and the value of 
--       <par>bin</par> is undefined.
--    -- When the subprogram succeeds, <par>error</par> contains <ent>conv_ok</ent>.
----------------------------------------------------------------------------------------------------




----------------------------------------------------------------------------------------------------


{
procedure real_to_string (
    num            : in treal)                   -- number to convert
    return t_char32ustr;
-- Converts a real to string.
----------------------------------------------------------------------------------------------------
procedure string_to_real (
    s              : in t_char32ustr;            -- character represetation
    ... ??? ...
-- Converts a real to string.
----------------------------------------------------------------------------------------------------
}
end conversions;
