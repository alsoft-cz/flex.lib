----------------------------------------------------------------------------------------------------
module private os =
-- Date/time.
-- Flex Standard Library
-- Copyright (C) 1999-2003 A && L soft
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
class private c_system_datetime_provider =
----------------------------------------------------------------------------------------------------
  --------------------------------------------------------------------------------------------------
  override get_machine_uptime =
  --------------------------------------------------------------------------------------------------
  begin
    end get_machine_uptime;



  --------------------------------------------------------------------------------------------------
  override get_datetime =
  --------------------------------------------------------------------------------------------------
  with
    system.windows.windef,
    system.windows.winbase;

  const
    t_tsc_win32_zero : t_timespan = [$00,$A0,$21,$BA,$23,$CC,$A5,$1B];--pondeli  1. ledna     1601 CE  00:00:00.0 (UTC)

  var
      dt           : t_datetime;

  begin
    GetSystemTimeAsFileTime(_FILETIME(dt:unchecked));
    result:=add_timespan(dt,t_tsc_win32_zero);
    end get_datetime;
  end c_system_datetime_provider;
end os;