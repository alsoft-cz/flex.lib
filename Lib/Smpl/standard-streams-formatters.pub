----------------------------------------------------------------------------------------------------
class public abstract c_stream_generic_writer = extend c_stream_writer;
-- pomocna implementace formateru zapisovaciho streamu
-- vhodna jako predek pro skutecny formater
----------------------------------------------------------------------------------------------------
protected
  ------------------------------------------------------------------------------------------------
  static write_byte(
      data       : in t_data_byte);            -- zapisovaný byte
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_unsigned32 (
      data         : in t_unsigned32);           -- zapisovaný unsigned
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_char32 (
      data         : in t_char32);               -- zapisovaný znak
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_unchecked (
      data         : in unchecked;               -- zapisovaná data
      size         : in t_unsigned32);           -- velikost dat, která se mají zapsat
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_heap (
      data         : in unchecked;               -- zapisovaná data, alokovana na heapu, uvolni prijemce
      size         : in t_unsigned32);           -- velikost dat, která se mají zapsat
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_array(
      data         : in ref t_data_array);       -- zapisované pole
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_string(
      data         : in ref t_data_string);      -- zapisovaný řetězec
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_text(
      data         : in ref t_char32ustr);       -- zapisovaný řetězec
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_text_part(
      data         : in ref t_char32ustr;        -- zapisovaný řetězec
      count        : t_unsigned);                -- pocet znaku ktere se maji zapsat
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  end c_stream_generic_writer;
type p_stream_generic_writer = ^class c_stream_generic_writer;


----------------------------------------------------------------------------------------------------
class public abstract c_stream_generic_reader = extend c_stream_reader;
-- pomocna implementace formateru cteciho streamu
-- vhodna jako predek pro skutecny formater
----------------------------------------------------------------------------------------------------
protected
  ------------------------------------------------------------------------------------------------
  static read_byte (
      data         : out t_data_byte;              -- načtený byte
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- eod           false  - valid data
  --               true   - invalid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_unsigned32 (
      data         : out t_unsigned32;
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - invalid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_char32 (
      data         : out t_char32;               -- načtený řetězec
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - invalid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_unchecked (
      data         : out unchecked;              -- přečtená data
      size         : in t_offset;                -- velikost dat, která se mají přečíst
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - invalid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_unchecked_out (
      data         : out unchecked;              -- přečtená data
      size         : in out t_offset;            -- velikost dat, která se mají přečíst, prectena velikost
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - valid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_array (
      data         : out t_data_array;           -- načtené pole
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - invalid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_string (
      data         : out t_data_string;          -- načtený řetězec
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - valid data, end of data
  ------------------------------------------------------------------------------------------------
  static read_text (
      data         : out t_char32ustr;           -- načtený řetězec
      eod          : out t_logical);
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- returns eod - false  - valid data
  --               true   - invalid data, end of data
  ------------------------------------------------------------------------------------------------
  end c_stream_generic_reader;
type p_stream_generic_reader = ^class c_stream_generic_reader;



----------------------------------------------------------------------------------------------------
class public c_stream_binary_writer = extend c_stream_generic_writer;
-- implementace binarniho zapisu do streamu
----------------------------------------------------------------------------------------------------
  ------------------------------------------------------------------------------------------------
  static write_unchecked (
      data       : in unchecked);                -- zapisovaná data
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  static write_unchecked_part (
      data       : in unchecked;                 -- zapisovaná data
      size       : in t_unsigned32);             -- velikost dat, která se mají zapsat
  -- zapise data, blokuje volajiciho do dokonceni zapisu
  -- muze vyhodit vyjimku stream_other_side kdyz druha strana prestane cist
  ------------------------------------------------------------------------------------------------
  end c_stream_binary_writer;
type p_stream_binary_writer = ^class c_stream_binary_writer;



----------------------------------------------------------------------------------------------------
class public c_stream_binary_reader = extend c_stream_generic_reader;
----------------------------------------------------------------------------------------------------
  ------------------------------------------------------------------------------------------------
  static read_unchecked (
      data       : out unchecked;              -- přečtená data
      size       : in t_unsigned32);           -- velikost dat, která se mají přečíst
  -- cte data, blokuje volajiciho do precteni dat nebo do endo of data
  -- muze vyvolat vyjimku stream_end_of_data kdyz jsou data kratsi nez pozadovana data
  ------------------------------------------------------------------------------------------------
  end c_stream_binary_reader;
type p_stream_binary_reader = ^class c_stream_binary_reader;
